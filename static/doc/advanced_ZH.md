### è‡ªå®šä¹‰é“¾å¼å‘½ä»¤æ–‡æ¡£

#### ğŸ“Œ **æ¦‚è¿°**
æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰é“¾å¼å‘½ä»¤ï¼Œé€šè¿‡ `crontab` å®šæ—¶ä»»åŠ¡æ‰§è¡Œä¸€ç³»åˆ—ä»»åŠ¡ï¼ŒåŒ…æ‹¬ HTTP è¯·æ±‚å’Œ AI è®¡ç®—ï¼Œå¹¶æœ€ç»ˆç»™å‡ºæŠ•èµ„å»ºè®®ã€‚
å¦‚æœä½ æƒ³ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œä½ éœ€è¦æ›´æ”¹./config/command.json æ–‡ä»¶ã€‚
---

## **ğŸ“– é…ç½®å­—æ®µè¯´æ˜**
| å­—æ®µå       | ç±»å‹      | è¯´æ˜ |
|-------------|----------|------|
| `crontab`   | `string` | å®šæ—¶ä»»åŠ¡çš„ Cron è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ `"0 */1 * * * *"` è¡¨ç¤ºæ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ |
| `command`   | `string` | ä»»åŠ¡åç§°ï¼Œä¾‹å¦‚ `"currency"` |
| `send_user` | `string` | å‘é€ä»»åŠ¡çš„ç”¨æˆ·ï¼ˆå¯ä¸ºç©ºï¼‰ |
| `send_group`| `string` | å‘é€ä»»åŠ¡çš„ç¾¤ç»„ï¼ˆå¯ä¸ºç©ºï¼‰ |
| `param`     | `object` | ä»»åŠ¡çš„å…¨å±€å‚æ•°ï¼Œä¾‹å¦‚ `currency_pair: "BTCUSDT"` |
| `chains`    | `array`  | ä»»åŠ¡é“¾ï¼ŒåŒ…å«å¤šä¸ªå­ä»»åŠ¡ |

### **ğŸ“Œ ä»»åŠ¡é“¾ï¼ˆchainsï¼‰**
ä»»åŠ¡é“¾ (`chains`) ç”±å¤šä¸ª `type` ç»„æˆï¼Œæ¯ä¸ª `type` é‡ŒåŒ…å« `tasks` ä»»åŠ¡åˆ—è¡¨ã€‚

#### **ä»»åŠ¡ç±»å‹**
| ç±»å‹åç§°  | è¯´æ˜ |
|----------|------|
| `http`   | è¿›è¡Œ HTTP è¯·æ±‚ï¼Œè·å–å¤–éƒ¨ API æ•°æ® |
| `deepseek` | AI è®¡ç®—ï¼Œæ ¹æ®å‰åºä»»åŠ¡ç»“æœç”Ÿæˆå»ºè®® |

---

## **ğŸ“– é…ç½®ç¤ºä¾‹**
ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ JSON é…ç½®ï¼š
```json
[
  {
    "crontab": "0 */1 * * * *",
    "command": "currency",
    "send_user": "",
    "send_group": "",
    "param": {
      "currency_pair": "BTCUSDT"
    },
    "chains": [
      {
        "type": "http",
        "tasks": [
          {
            "name": "task1",
            "http_param": {
              "url": "https://api.binance.com/api/v3/ticker/price?symbol={{.currency_pair}}",
              "method": "GET",
              "headers": {},
              "body": ""
            },
            "proxy": ""
          },
          {
            "name": "task2",
            "http_param": {
              "url": "https://api.binance.com/api/v3/ticker/price?symbol=DOGEUSDT",
              "method": "GET",
              "headers": {},
              "body": ""
            },
            "proxy": ""
          }
        ]
      },
      {
        "type": "deepseek",
        "tasks": [
          {
            "name": "task3",
            "template": "BTC price is {{.task1.price}}, Doge price is {{.task2.price}}, give me some advice about investment.",
            "proxy": ""
          }
        ]
      }
    ]
  }
]
```

---

## **ğŸ“– ä»»åŠ¡æ‰§è¡Œæµç¨‹**
1. **å®šæ—¶è§¦å‘**
   - ä»»åŠ¡æŒ‰ç…§ `crontab: "0 */1 * * * *"` é…ç½®ï¼Œæ¯ 1 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚
   - é€šè¿‡ä»»åŠ¡åç§°`/currency`è‡ªåŠ¨åŒ–æ‰§è¡Œ

2. **æ‰§è¡Œ HTTP ä»»åŠ¡ (`task1`)**
   - è®¿é—® `https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT`
   - è·å–å½“å‰ BTC/USDT ä»·æ ¼ï¼Œè¿”å›æ ¼å¼å¦‚ä¸‹ï¼š
     ```json
     {
       "symbol": "BTCUSDT",
       "price": "45000.00"
     }
     ```
   - è¿”å›ç»“æœè¢«å­˜å‚¨ä¸ºï¼š
     ```json
     {
      "task1": {
        "price": "45000.00", 
        "symbol": "BTCUSDT"
      }
     }
      ```

3. **æ‰§è¡Œ AI åˆ†æä»»åŠ¡ (`task2`)**
   - `task1.price` å€¼è¢«åŠ¨æ€å¡«å……ï¼Œä¾‹å¦‚ `"BTC price is 45000.00, give me some advice about investment."`
   - AI è§£æè¯¥æ¨¡æ¿å¹¶è¿”å›æŠ•èµ„å»ºè®®ã€‚

---

## **ğŸ“– Cron è¡¨è¾¾å¼è§£æ**
| è¡¨è¾¾å¼           | è¯´æ˜ |
|-----------------|------|
| `0 */1 * * * *` | æ¯ 1 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ |
| `0 0 * * * *`   | æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡ |
| `0 0 9 * * *`   | æ¯å¤©æ—©ä¸Š 9 ç‚¹æ‰§è¡Œä¸€æ¬¡ |
| `0 0 0 1 * *`   | æ¯æœˆ 1 å·æ‰§è¡Œä¸€æ¬¡ |

---

## **ğŸ“– æ€»ç»“**
1. **å®šæ—¶ä»»åŠ¡** (`crontab`) æ¯åˆ†é’Ÿè§¦å‘
2. **è·å–å¸ä»·** (`http` ä»»åŠ¡)
3. **åˆ†ææŠ•èµ„å»ºè®®** (`deepseek` ä»»åŠ¡)
4. **æ‰©å±•èƒ½åŠ›**ï¼ˆæ”¯æŒå¤šä¸ªå¸ç§ & æ¶ˆæ¯æ¨é€ï¼‰

ğŸš€ è¿™æ ·ï¼Œä½ å°±å¯ä»¥ç”¨ deepseek æ‰§è¡Œè‡ªåŠ¨åŒ–æŠ•èµ„åˆ†æäº†ï¼
